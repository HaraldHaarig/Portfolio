---
import careerData from '../data/career.json';

const { timeline } = careerData;

// Count items by type
const educationCount = timeline.filter(item => item.type === 'education').length;
const internshipCount = timeline.filter(item => item.type === 'internship').length;
---

<section id="career" class="py-20 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800">
  <div class="container mx-auto px-4">
    
    {/* Header */}
    <div class="text-center mb-12" data-aos="fade-up">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 text-dark dark:text-white">
        Mein <span class="text-primary">Werdegang</span>
      </h2>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        Meine schulische Ausbildung und praktische Erfahrungen im Überblick
      </p>
    </div>

    {/* Stats */}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12" data-aos="fade-up">
      <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow text-center border border-gray-200 dark:border-gray-700">
        <div class="text-3xl font-bold text-primary">{timeline.length}</div>
        <div class="text-gray-600 dark:text-gray-400">Stationen</div>
      </div>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow text-center border border-gray-200 dark:border-gray-700">
        <div class="text-3xl font-bold text-green-600">{educationCount}</div>
        <div class="text-gray-600 dark:text-gray-400">Schulische Stationen</div>
      </div>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow text-center border border-gray-200 dark:border-gray-700">
        <div class="text-3xl font-bold text-blue-600">{internshipCount}</div>
        <div class="text-gray-600 dark:text-gray-400">Praktika</div>
      </div>
    </div>

    {/* Timeline */}
    <div class="relative">
      {/* Timeline Line */}
      <div class="absolute left-4 md:left-1/2 transform md:-translate-x-1/2 h-full w-1 bg-gradient-to-b from-primary to-secondary hidden md:block"></div>
      
      {/* Timeline Items */}
      <div class="space-y-12">
        {timeline.map((item, index) => (
          <div 
            class={`flex flex-col md:flex-row items-center ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}
            data-aos="fade-up"
            data-aos-delay={index * 100}
          >
            {/* Timeline Dot */}
            <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white dark:bg-gray-800 border-4 border-white dark:border-gray-900 shadow-lg z-10">
              <div class={`w-4 h-4 rounded-full bg-gradient-to-r ${item.color}`}></div>
            </div>
            
            {/* Content Card */}
            <div class={`md:w-5/12 mt-4 md:mt-0 ${index % 2 === 0 ? 'md:pr-12' : 'md:pl-12'}`}>
              <div class={`bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-500 ${
                item.current ? 'ring-2 ring-primary ring-opacity-50' : ''
              }`}>
                
                {/* Header */}
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-3">
                    <div class={`w-12 h-12 rounded-full bg-gradient-to-r ${item.color} flex items-center justify-center text-white text-xl`}>
                      {item.icon}
                    </div>
                    <div>
                      <div class="flex items-center gap-2">
                        <h3 class="text-xl font-bold text-dark dark:text-white">{item.title}</h3>
                        {item.current && (
                          <span class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full">
                            Aktuell
                          </span>
                        )}
                      </div>
                      <p class="text-gray-600 dark:text-gray-400 text-sm">{item.subtitle}</p>
                    </div>
                  </div>
                  <span class={`px-3 py-1 rounded-full text-sm font-medium ${
                    item.type === 'education' 
                      ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' 
                      : 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'
                  }`}>
                    {item.type === 'education' ? 'Ausbildung' : 'Praktikum'}
                  </span>
                </div>
                
                {/* Details */}
                <div class="space-y-3">
                  <div class="flex items-center gap-2 text-gray-600 dark:text-gray-400">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <span>{item.location}</span>
                  </div>
                  
                  <div class="flex items-center gap-2 text-gray-600 dark:text-gray-400">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    <span>{item.period}</span>
                  </div>
                </div>
                
                {/* Description */}
                <p class="mt-4 text-gray-700 dark:text-gray-300">
                  {item.description}
                </p>
                
                {/* Skills/Tags für Praktika */}
                {item.type === 'internship' && (
                  <div class="mt-4 flex flex-wrap gap-2">
                    {index === 3 && ( // Erstes Praktikum
                      <>

                      </>
                    )}
                    {index === 4 && ( // Zweites Praktikum
                      <>
                        
                      </>
                    )}
                    {index === 5 && ( // Drittes Praktikum
                      <>

                      </>
                    )}
                  </div>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    {/* Summary */}
    <div class="mt-16 bg-gradient-to-r from-primary/10 to-secondary/10 p-8 rounded-2xl" data-aos="fade-up">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div>
          <h3 class="text-2xl text-white font-bold mb-3">Zusammenfassung</h3>
          <p class="text-white text-white-300">
            Durch die Kombination von schulischer Ausbildung an der HTL und drei praktischen Praktika 
            habe ich sowohl fundiertes theoretisches Wissen als auch relevante Berufserfahrung gesammelt. 
            Ich bin bestrebt, mich kontinuierlich weiterzuentwickeln und innovative Lösungen zu schaffen.
          </p>
        </div>
    </div>

  </div>
</section>

<style>
  /* Custom timeline styling */
  .timeline-dot {
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
  }
  
  .current-item {
    animation: pulse-current 2s infinite;
  }
  
  @keyframes pulse-current {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
    }
    50% {
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }
</style>